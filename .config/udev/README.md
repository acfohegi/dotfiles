You can't use $HOME in udev scripts. So it's best to place them in a system directory (install.sh).

2025-04-03: Simplified udev rules for switching output. There is an issue with xrandr delay after booting. Example:

```
# BOOTED WITH HDMI-2 CONNECTED.
# AT 18:28 THE SCRIPT IS EXECUTED FROM UDEV. FAILED TO CALL XRANDR.
# THEN WAS NO SINGLE CONNECTION OR DISCONNECTION. ONLY WAITING.
# AND FINALLY THE SCRIPT IS EXECUTED WITH SUCCESFULL CALLS TO XRANDR 6 TIMES.
# AFTER THAT ALL EVENTS ARE PROCESSED CORRECTLY.


[2025-04-03T18:28:43+04:00] START FOR EXTERNAL_OUTPUT: HDMI-2
[2025-04-03T18:28:43+04:00] XAUTHORITY:/run/user/1000/gdm/Xauthority DISPLAY::0 INTERNAL_OUTPUT:eDP-1
[2025-04-03T18:31:44+04:00] START FOR EXTERNAL_OUTPUT: HDMI-2
[2025-04-03T18:31:44+04:00] XAUTHORITY:/run/user/1000/gdm/Xauthority DISPLAY::0 INTERNAL_OUTPUT:eDP-1
[2025-04-03T18:31:45+04:00] XRANDR STATE FOR EXTERNAL OUTPUT: HDMI-2 connected 2560x1440+1366+0 (normal left inverted right x axis y axis) 597mm x 336mm
[2025-04-03T18:31:45+04:00] EXTERNAL_OUTPUT CONNECTED: HDMI-2
[2025-04-03T18:31:47+04:00] START FOR EXTERNAL_OUTPUT: HDMI-2
[2025-04-03T18:31:47+04:00] XAUTHORITY:/run/user/1000/gdm/Xauthority DISPLAY::0 INTERNAL_OUTPUT:eDP-1
[2025-04-03T18:31:49+04:00] XRANDR STATE FOR EXTERNAL OUTPUT: HDMI-2 connected 2560x1440+0+0 (normal left inverted right x axis y axis) 597mm x 336mm
[2025-04-03T18:31:49+04:00] EXTERNAL_OUTPUT CONNECTED: HDMI-2
[2025-04-03T18:31:51+04:00] START FOR EXTERNAL_OUTPUT: HDMI-2
[2025-04-03T18:31:51+04:00] XAUTHORITY:/run/user/1000/gdm/Xauthority DISPLAY::0 INTERNAL_OUTPUT:eDP-1
[2025-04-03T18:31:52+04:00] XRANDR STATE FOR EXTERNAL OUTPUT: HDMI-2 connected 2560x1440+0+0 (normal left inverted right x axis y axis) 597mm x 336mm
[2025-04-03T18:31:53+04:00] EXTERNAL_OUTPUT CONNECTED: HDMI-2
[2025-04-03T18:31:54+04:00] START FOR EXTERNAL_OUTPUT: HDMI-2
[2025-04-03T18:31:54+04:00] XAUTHORITY:/run/user/1000/gdm/Xauthority DISPLAY::0 INTERNAL_OUTPUT:eDP-1
[2025-04-03T18:31:56+04:00] XRANDR STATE FOR EXTERNAL OUTPUT: HDMI-2 connected 2560x1440+0+0 (normal left inverted right x axis y axis) 597mm x 336mm
[2025-04-03T18:31:56+04:00] EXTERNAL_OUTPUT CONNECTED: HDMI-2
[2025-04-03T18:31:58+04:00] START FOR EXTERNAL_OUTPUT: HDMI-2
[2025-04-03T18:31:58+04:00] XAUTHORITY:/run/user/1000/gdm/Xauthority DISPLAY::0 INTERNAL_OUTPUT:eDP-1
[2025-04-03T18:31:59+04:00] XRANDR STATE FOR EXTERNAL OUTPUT: HDMI-2 connected 2560x1440+0+0 (normal left inverted right x axis y axis) 597mm x 336mm
[2025-04-03T18:31:59+04:00] EXTERNAL_OUTPUT CONNECTED: HDMI-2
[2025-04-03T18:32:01+04:00] START FOR EXTERNAL_OUTPUT: HDMI-2
[2025-04-03T18:32:01+04:00] XAUTHORITY:/run/user/1000/gdm/Xauthority DISPLAY::0 INTERNAL_OUTPUT:eDP-1
[2025-04-03T18:32:02+04:00] XRANDR STATE FOR EXTERNAL OUTPUT: HDMI-2 connected 2560x1440+0+0 (normal left inverted right x axis y axis) 597mm x 336mm
[2025-04-03T18:32:03+04:00] EXTERNAL_OUTPUT CONNECTED: HDMI-2


# THE SAME BUT BOOTED WITH NO HDMI-2 CONNECTED.
# 3 MINUTES SINCE FAILED CALL TO XRANDR.
# THEN AGAIN 6 EXECUTIONS OF THE SCRIPT.
# FROM THAT MOMENT UDEV RULE WILL WORK AS INTENDED.
# THE SCRIPT WILL FIRE ONLY ONCE PER CONNECTION OR DISCONNECTION EVENT.


[2025-04-03T18:43:19+04:00] START FOR EXTERNAL_OUTPUT: HDMI-2
[2025-04-03T18:43:19+04:00] XAUTHORITY:/run/user/1000/gdm/Xauthority DISPLAY::0 INTERNAL_OUTPUT:eDP-1
[2025-04-03T18:46:20+04:00] START FOR EXTERNAL_OUTPUT: HDMI-2
[2025-04-03T18:46:20+04:00] XAUTHORITY:/run/user/1000/gdm/Xauthority DISPLAY::0 INTERNAL_OUTPUT:eDP-1
[2025-04-03T18:46:20+04:00] XRANDR STATE FOR EXTERNAL OUTPUT: HDMI-2 disconnected (normal left inverted right x axis y axis)
[2025-04-03T18:46:21+04:00] EXTERNAL_OUTPUT DISCONNECTED: HDMI-2
[2025-04-03T18:46:21+04:00] START FOR EXTERNAL_OUTPUT: HDMI-2
[2025-04-03T18:46:21+04:00] XAUTHORITY:/run/user/1000/gdm/Xauthority DISPLAY::0 INTERNAL_OUTPUT:eDP-1
[2025-04-03T18:46:22+04:00] XRANDR STATE FOR EXTERNAL OUTPUT: HDMI-2 disconnected (normal left inverted right x axis y axis)
[2025-04-03T18:46:23+04:00] EXTERNAL_OUTPUT DISCONNECTED: HDMI-2
[2025-04-03T18:46:23+04:00] START FOR EXTERNAL_OUTPUT: HDMI-2
[2025-04-03T18:46:23+04:00] XAUTHORITY:/run/user/1000/gdm/Xauthority DISPLAY::0 INTERNAL_OUTPUT:eDP-1
[2025-04-03T18:46:23+04:00] XRANDR STATE FOR EXTERNAL OUTPUT: HDMI-2 disconnected (normal left inverted right x axis y axis)
[2025-04-03T18:46:25+04:00] EXTERNAL_OUTPUT DISCONNECTED: HDMI-2
[2025-04-03T18:46:25+04:00] START FOR EXTERNAL_OUTPUT: HDMI-2
[2025-04-03T18:46:25+04:00] XAUTHORITY:/run/user/1000/gdm/Xauthority DISPLAY::0 INTERNAL_OUTPUT:eDP-1
[2025-04-03T18:46:25+04:00] XRANDR STATE FOR EXTERNAL OUTPUT: HDMI-2 disconnected (normal left inverted right x axis y axis)
[2025-04-03T18:46:26+04:00] EXTERNAL_OUTPUT DISCONNECTED: HDMI-2
[2025-04-03T18:46:26+04:00] START FOR EXTERNAL_OUTPUT: HDMI-2
[2025-04-03T18:46:26+04:00] XAUTHORITY:/run/user/1000/gdm/Xauthority DISPLAY::0 INTERNAL_OUTPUT:eDP-1
[2025-04-03T18:46:26+04:00] XRANDR STATE FOR EXTERNAL OUTPUT: HDMI-2 disconnected (normal left inverted right x axis y axis)
[2025-04-03T18:46:28+04:00] EXTERNAL_OUTPUT DISCONNECTED: HDMI-2
[2025-04-03T18:46:28+04:00] START FOR EXTERNAL_OUTPUT: HDMI-2
[2025-04-03T18:46:28+04:00] XAUTHORITY:/run/user/1000/gdm/Xauthority DISPLAY::0 INTERNAL_OUTPUT:eDP-1
[2025-04-03T18:46:28+04:00] XRANDR STATE FOR EXTERNAL OUTPUT: HDMI-2 disconnected (normal left inverted right x axis y axis)
[2025-04-03T18:46:29+04:00] EXTERNAL_OUTPUT DISCONNECTED: HDMI-2
```

2025-10-30: Changing monitor switching setup from udev events + script with xrandr to autorandr.

